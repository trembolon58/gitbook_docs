# Webinargeek

## **Как настроить Webinargeek**

### Как получить токен

Токен необходимо получить в интерфейсе системы Webinargeek. Для этого перейдите в раздел настройки аккаунта. Найти его можете в верхнем правом углу и после нажатия на слово Account откроется список, в котором нужно выбрать первый пункт.

Далее в выпавшем справа списке найдите пункт API и выберите его

После этого загрузится страница, содержащая API-ключ

Если ключа нет, то необходимо обратиться в техподдержку и попросить дать возможность получить API-ключ.&#x20;

После получения токена переходим в Salebot Настройки проекта -> Переменные проекта и сохраняем его в переменную **webinargeek\_token**:

## **Как получить список вебинаров через чат-бот**

Для получения списка вебинаров достаточно вызвать функцию: **webinargeek\_get\_webinar\_list()**

В результате в этой переменной будет список вебинаров в следующем виде: \['{"id":1455034,"date":"11-05-2022 18:00","name":"Second webinar"}', '{"id":1455046,"date":"11-05-2022 18:00","name":"My Webinar"}', '{"id":1453081,"date":"04-05-2022 18:00","name":"My first webinar"}']\
&#x20;где:\
"<mark style="color:orange;">**id**</mark>" - это id трансляции (broadcast\_id), значение необходимо для всех прочих действий с этим вебинаром. \
"<mark style="color:orange;">**date**</mark>" - дата и время проведения этой трансляции. \
&#xNAN;**"**<mark style="color:orange;">**name**</mark>**"** - название вебинара.\
\
Если передать в функцию любой символ (лучше всего поставить там 1), то функция покажет только те вебинары, которые еще не закончились, а если ничего не поставить, то вернет в том числе и завершенные.

## **Как регистрировать на вебинар через чат-бот**

Для регистрации на вебинар нужно вызвать функцию: **webinargeek\_get\_webinar\_list()** с нужными параметрами. \
Всего необходимы 3 переменных: \
<mark style="color:orange;">broadcast\_id</mark> - id трансляции, на которую нужно записать клиента, \
<mark style="color:orange;">name</mark> - имя клиента, которое будет отображаться в чате, \
<mark style="color:orange;">email</mark> - адрес электронной почты на который придет приглашение на вебинар вместе со ссылкой.&#x20;

&#x20;**webinargeek\_get\_webinar\_list(broadcast\_id, name, email)**

Без этих трех параметров нельзя записать клиента через чат-бот: \
**url = webinargeek\_add\_subscriber(1455046, 'Василий Петров', 'Vasya\_petrov@yandex.ru')**

В результате в этой переменной будет ссылка на трансляцию, перейдя по которой пользователю не придется регистрироваться. Все данные пользователя задаются в этой переменной. \
Также после исполнения функции в карточке клиента в информации о сделке добавится 2 переменные: \
**webinargeek\_broadcast\_id** - id трансляции, на которую записан пользователь,&#x20;

**webinargeek\_email** - email, указанный при записи пользователя. \
Эти переменные пригодятся для проверки посещения клиентом вебинара.

## **Как проверить посещение вебинара через чат-бот**

Для проверки посещения вебинара нужно вызвать функцию: \
**webinargeek\_is\_visitor()** с нужными параметрами.  \
В данной функции три переменные: \
<mark style="color:orange;">**broadcast\_id**</mark> - id трансляции, на которую был записан клиент, \
<mark style="color:orange;">**email**</mark> - адрес электронной почты, указанный для клиента, \
<mark style="color:orange;">**watch\_minimum**</mark> - (необязательный параметр) минимальное количество минут, по которому функция определяет будет ли засчитано посещение или нет.&#x20;

**watch = webinargeek\_is\_visitor(webinargeek\_broadcast\_id, webinargeek\_email)**

В переменную будет помещен ответ:\
**-** Если вебинар еще не закончился, то в ответ придет текст 'Webinar not ended yet'. \
\- Если клиент не смотрел вебинар, то в ответ всегда придет False. \
\- Если клиент смотрел вебинар и параметр watch\_minimum не использовался, то в ответ придет True. \
\- Если параметр watch\_minimum использовался, то функция проверит сколько времени пользователь смотрел вебинар \
&#x20;        \- и если смотрел меньшее кол-во минут, чем задано, то в ответ придет False\
&#x20;        \- а если равное, либо большее, то придет и если смотрел меньшее количество минут, чем задано, то в ответ придет True.

## **Как получить id трансляции  по названию вебинара, начиная с определенной даты и времени**

Для получения id конкретной трансляции нужно вызвать функцию:\
**webinargeek\_search\_broadcast\_id()** со следующими параметрами: \
**webinar\_list** - здесь необходимо передать переменную, содержащую результат выполнения функции webinargeek\_get\_webinar\_list() \
**webinar\_name** - имя Вебинара, id трансляции которого нужно найти \
**webinar\_date** - дата проведения трансляции вида D.M.Y, где D - число, M - месяц, Y - год. Также можно использовать current\_date \
**webinar\_time** - время проведении трансляции вида HH:MM, где HH - часы, а MM - минуты.&#x20;

Пример:\
webinar\_list = webinargeek\_get\_webinar\_list() \
broadcast\_id = webinargeek\_search\_broadcast\_id(webinar\_list, 'Second webinar', current\_date-4, '18:00')

В данном примере ищем id трансляции, которая прошла за 4 дня до текущей даты в 18:00 и вебинар назывался Second webinar. \
В случае если вебинар, соответствующий параметрам, был в списке, то функция вернет в переменную broadcast\_id id найденного вебинара, а если такого вебинара не найдено, то в переменную будет помещен текст: No webinar with these parameters.
