# Roistat

## Как настроить Roistat

### Как добавить счетчик на минилендинг Salebot

Для работы интеграции необходимо добавить код счетчика Roistat на минилендинг Salebot:

1. В проекте Roistat раскройте главное меню в левом верхнем углу и перейдите в раздел **Настройки**. Откройте вкладку **Код счетчика** и нажмите **Скопировать в буфер**:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.55.38.png" alt=""><figcaption></figcaption></figure>

&#x20;В интерфейсе Salebot откройте раздел **Минилендинги** и перейдите к редактированию минилендинга:

<figure><img src="../../.gitbook/assets/image (170).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (171).png" alt=""><figcaption></figcaption></figure>

&#x20;В разделе **CSS и JS** в  поле **Html-код body** вставьте код, скопированный в п.1:

<figure><img src="../../.gitbook/assets/image (172).png" alt=""><figcaption></figcaption></figure>

&#x20;Ниже в настройках минилендинга - Аналитика -  найдите блок **Сохранение в переменные клиента значений из куки** и активируйте чекбокс **Roistat Visit Id (roistat\_visit)**:

<figure><img src="../../.gitbook/assets/image (173).png" alt=""><figcaption></figcaption></figure>

### Как проверить подключение счетчика

&#x20;В проекте Roistat перейдите в раздел **Настройки** - **Код счетчика**. В блоке **Проверка подключения счетчика** вставьте ссылку на минилендинг и нажмите **Проверить счетчик**:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.56.48.png" alt=""><figcaption></figcaption></figure>

Код добавлен верно, если появилось сообщение _Счетчик установлен успешно_.

При переходе клиента с минилендинга в информации о данном клиенте должна появляться переменная **roistat\_visit**:

<figure><img src="../../.gitbook/assets/image (175).png" alt=""><figcaption></figcaption></figure>

### Как подключить интеграцию Salebot

В проекте Roistat раскройте главное меню в левом верхнем углу и перейдите в раздел **Интеграции**. Нажмите **Добавить интеграцию**. Найдите и добавьте интеграцию с Salebot:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.57.28.png" alt=""><figcaption></figcaption></figure>

Затем нажмите **Настроить интеграцию**:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.57.54.png" alt=""><figcaption></figcaption></figure>

Скопируйте Webhook URL и нажмите **Следующий шаг**:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.58.28.png" alt=""><figcaption></figcaption></figure>

На шаге **Настройка поведения** вы можете:

* Настроить отправку заявок в CRM. Если отключить опцию **Отправлять заявки в CRM**, лиды будут создаваться в списке отправленных заявок, но не будут отправляться в CRM;
* Настроить опцию **Создавать заявки без контактных данных**. Если опция включена, заявка будет отправляться в CRM даже при отсутствии контактных данных клиента;
* Создать [сценарии отправки заявок](https://help.roistat.com/integrations/Scenarii_otpravki_zayavok);
* Настроить [сценарии отправки целей](https://help.roistat.com/integrations/Scenarii_otpravki_celei) в Google Аналитику и Яндекс.Метрику.

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.59.00.png" alt="" width="363"><figcaption></figcaption></figure>

Нажмите **Сохранить**, чтобы применить изменения.

В интерфейсе Salebot перейдите в раздел **Конструктор воронок**. Создайте блок для отправки событий через вебхук. Нажмите **API-запрос** и укажите:

* **Тип запроса**: POST-json
* **URL запроса**: Webhook URL, скопированный в п.2

{% hint style="info" %}
&#x20;Тип блока бота может быть любым (например, **Состояние диалога**).
{% endhint %}

В поле **JSON POST-параметров** добавьте следующие параметры:

* `"roistat_visit" : "#{roistat_visit}` – обязательный параметр;
* `"phone" : "#{phone}"` – обязательный параметр;
* `"name" : "#{imya}"` – опционально;
* `"email" : "#{email}"` – опционально;
* `"comment" : "test"` – опционально; вместо _test_ можно добавить любой комментарий, который будет отправлен в Roistat и CRM вместе с заявкой из чат-бота;
* `"fields": {"Мессенджер": "#{messenger}"` – опционально; через этот параметр можно настроить заполнение дополнительных полей в CRM по заявке из чат-бота. В данном примере поле _Мессенджер_ будет заполняться значением переменной _#{messenger}_ из Salebot.

Пример заполнения поля **JSON POST-параметров**:

`{` \
&#x20;   `"roistat_visit" : "#{roistat_visit}",` \
&#x20;   `"phone" : "#{phone}",` \
&#x20;   `"name" : "#{imya}",` \
&#x20;   `"email" : "#{email}",` \
&#x20;   `"comment" : "test",` \
&#x20;   `"fields": {"Мессенджер": "#{messenger}"}` \
`}`

Пример настроек блока:

<figure><img src="../../.gitbook/assets/image (180).png" alt="" width="520"><figcaption></figcaption></figure>

&#x20;Нажмите **Готово**, чтобы сохранить блок.

## Как проверить работу

&#x20;После настройки интеграции заявки, полученные через Salebot, будут передаваться в Roistat с номером визита. Их можно посмотреть в Аналитике Roistat, а также в разделе **Состояние проекта** → **Список отправленных заявок**:

<figure><img src="../../.gitbook/assets/Снимок экрана 2026-01-21 в 15.59.50.png" alt=""><figcaption></figcaption></figure>

Если включена отправка заявок в CRM, сделки по этим заявкам также будут созданы в CRM.
