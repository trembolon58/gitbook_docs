# Опрос в чат-боте с баллами

В конструкторе вы сможете создать опрос в боте с начислением баллов в зависимости от ответа клиента:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.03.06.png" alt="" width="563"><figcaption></figcaption></figure>

Например, опрос в чат-боте можно использовать для проверки знаний ваших пользователей, для социологических или психологических опросов.

## Настройки схемы

Чтобы сделать опрос быстрее и проще, заранее подготовьте сценарий с вопросами и ответами в обычном документе:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.24.55.png" alt=""><figcaption></figcaption></figure>

### Вход в опрос

Создайте в конструкторе блок с условием ("Стартовый блок" или "Не состояние с условием"), с которого будет начинаться опрос:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.28.43.png" alt=""><figcaption></figcaption></figure>

В стартовом блоке на примере прописано только сообщение со вступительным словом. Теперь необходимо создать блок ниже: для этого откройте меню дополнительных настроек и нажмите соответствующую кнопку:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.31.21.png" alt=""><figcaption></figcaption></figure>

#### Автоматический переход

Далее перейдите в настройку стрелки и установите таймер, чтобы первый вопрос клиенту был отправлен автоматически:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.32.06.png" alt=""><figcaption></figcaption></figure>

#### Переход к опросу по кнопке

Если нужно, чтобы пользователь начинал опрос по клику на кнопку, создайте в стартовом блоке соответствующие кнопки:&#x20;

1. для этого перейдите в зеленый блок;
2. нажмите на "Кнопки", чтобы развернуть вкладку настроек;
3. кликните на "+ Добавить кнопку":

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.43.04.png" alt=""><figcaption></figcaption></figure>

Далее в открывшемся модальном окне пропишите текст кнопки, затем нажмите на "Добавить кнопку":

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.44.46.png" alt=""><figcaption></figcaption></figure>

Перейдите в настройки стрелки и в условии отметьте галочкой кнопку:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.46.28.png" alt="" width="563"><figcaption></figcaption></figure>

Данный шаг нужен для того, чтобы клиент переходил в следующий блок только по определенному условию (в данном случае — условием будет являться текст кнопки).

Выбор соответствия — полное совпадение:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.46.57.png" alt="" width="563"><figcaption></figcaption></figure>

### Настройка вопросов и ответов

Теперь перейдем к самому интересному — настройке вопросов с ответами: здесь вам понадобится ваш заготовленный сценарий с вопросами.&#x20;

Шаг 1. В блоке, к которому ведет стрелка из стартового блока, вставьте из сценария в поле сообщения первый вопрос:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.49.40.png" alt=""><figcaption></figcaption></figure>

Шаг 2. Далее в зависимости от количества ответов, создайте кнопки с вариантами ответа (в примере будет 4 кнопки):

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.52.24.png" alt=""><figcaption></figcaption></figure>

Шаг 3.В модальном окне с настройками кнопки пропишите текст ответа и нажмите "Добавить":

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.53.13.png" alt=""><figcaption></figcaption></figure>

{% hint style="danger" %}
**Важно!**&#x20;

В Телеграмме невозможно сделать слишком длинные варианты ответов в кнопке.

Вариант для телеграма: прописать ответы в сообщении и в кнопках указать более лаконичный текст:

<img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 15.19.30.png" alt="" data-size="original">

Если варианты ответов в кнопках будут слишком длинные, то будет приходить следующая ошибка:

<img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 15.20.52.png" alt="" data-size="original">

Учитывайте максимальное количество символов кнопки для Telegram.

Длинные варианты ответа, например, можно предусмотреть для [онлайн-чата на сайт](/broken/pages/bFGXHAuc8giXRvQy74bS).
{% endhint %}

Таким образом добавьте необходимое количество кнопок в блок:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.58.07.png" alt=""><figcaption></figcaption></figure>

Шаг 4. Теперь нажмите на меню дополнительных настроек и создайте столько блоков, сколько у вас создано кнопок с ответами на вопрос:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 10.59.00.png" alt=""><figcaption></figcaption></figure>

В примере на четыре кнопки с ответами создано четыре блока:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 11.05.32.png" alt=""><figcaption></figcaption></figure>

Шаг 5. Теперь перейдите в настройки стрелок и отметьте галочками в условии одну кнопку:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 11.11.09.png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Условия в настройках стрелки должны удовлетворять только тексту одного вариантов из ответов клиента — это значит, что в условии каждой стрелки должна быть отмечена одна кнопка, в следующей стрелке — соответственно другая кнопка и т.д.
{% endhint %}

На примере видно, что каждой стрелке соответствует только одна из кнопок:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.16.03.png" alt=""><figcaption></figcaption></figure>

Шаг 6. Далее создаем блок ниже, в который будут вести стрелки из четырех блоков с ответами на вопрос:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.17.29.png" alt=""><figcaption></figcaption></figure>

Шаг 7. В настройках каждой стрелки, ведущих к одному блоку, мы установим таймер в 0 секунд:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.19.45.png" alt=""><figcaption></figcaption></figure>

Шаг 8. И в блоке, к которому ведут 4 стрелки, пропишем следующий вопрос:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.18.55.png" alt=""><figcaption></figcaption></figure>

Теперь создадим в блоке со вторым вопросом точно так же варианты ответа, которые будут лежат в кнопках:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.22.43.png" alt=""><figcaption></figcaption></figure>

Теперь из блока со вторым вопросом создадим четыре блока ниже, в стрелках которых в условии пропишем варианты ответа, — по сути, теперь будут повторяться шаги с 1 по 8, где нужно заполнить поле вопроса, создать необходимое количество кнопок с вариантами ответа и в условии стрелки прописать вариант ответа.

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.33.27.png" alt=""><figcaption></figcaption></figure>

На примере выше наглядно можно увидеть повторяющиеся настройки блоков с вопросами. Таким образом заполняются все вопросы и ответы.&#x20;

Шаг 9. Далее вам нужно создать следующий блок с вопросом: для этого создайте блок "Состояние" и протяните к нему стрелки:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.44.26.png" alt=""><figcaption></figcaption></figure>

Так будет создан блок третьего вопроса: теперь вы можете продолжить заполнять вопросы с ответами по описанным шагам 1-9.

{% hint style="success" %}
Удобнее и быстрее будет сначала создать все вопросы и ответы на них, а затем присвоить переменную с начислением баллов.&#x20;

Как начислять баллы в ходе опроса, рассказали далее.
{% endhint %}

### Как начислять баллы?

Шаг 1. Перейдите в блок с первым вопросом:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.47.35.png" alt=""><figcaption></figcaption></figure>

В калькуляторе объявите переменную, например, с названием "балл" со значением ноль:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.48.53.png" alt=""><figcaption></figcaption></figure>

Шаг 2. Нужно перейти в блок, в который ведет стрелка с ответом на вопрос, и открыть калькулятор:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.52.47.png" alt=""><figcaption></figcaption></figure>

В соответствии со сценарием, прибавьте количество баллов к переменной в калькуляторе:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.54.25.png" alt=""><figcaption></figcaption></figure>

В блоке, в который ведет вариант А, прибавляется 4 балла:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.57.27.png" alt=""><figcaption></figcaption></figure>

В блоке, в который ведет вариант В, прибавляется 3 балла:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 12.58.17.png" alt=""><figcaption></figcaption></figure>

В блоке, в который ведет вариант С, прибавляется 2 балла:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 13.00.09.png" alt=""><figcaption></figcaption></figure>

В блоке, в который ведет вариант D, прибавляется 1 балл:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 13.02.18.png" alt=""><figcaption></figcaption></figure>

То же самое проделываем со следующими блоками, в которые ведут стрелки с вариантами ответа, — нужно прибавить к переменной баллы в зависимости от варианта ответа:

<figure><img src="../../.gitbook/assets/Запись-экрана-2025-08-06-в-14.06.57-_online-video-cutter.com_-_1_.gif" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
Готово!&#x20;

Теперь вы создали схему чат-бота с вопросами и начислением баллов клиенту.
{% endhint %}

### Как вывести результат?

#### Вариант 1. Выводим результат в тексте:

В последнем блоке, в который ведут стрелки из блоков с начислением баллов, вывести результат можно с помощью конструкции #{балл}:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 14.19.14.png" alt=""><figcaption></figcaption></figure>

Тогда ваш пользователь наглядно сможет увидеть итоговое количество баллов, которые он набрал в ходе опроса и сравнить результаты.

#### Вариант 2. Калькулятор и оператор IF

Если вы хотите выводить более короткий и лакончиный ответ, то воспользуйтесь калькулятором с функцией IF:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 14.43.02.png" alt=""><figcaption></figcaption></figure>

То есть нужно прописать условия для бота "<mark style="color:$danger;">**если баллов меньше 8, то ты меланхолик, если баллов больше или равно 8 и меньше или равно 11, то ты флегматик и т.д.**</mark>" только на понятном системе языке.&#x20;

Код для копирования:

`текст = if(балл < 8, "Ты меланхолик - застенчивый, чувствительный, склонен к размышлениям и переживаниям. Отличаешься глубокой эмоциональностью", if(балл >= 8 and балл <= 11, "Ты флегматик: спокойный, уравновешенный, рассудительный. Не любишь суету, предпочитаешь стабильность", if(балл > 11 and балл < 21, "Ты сангвиник: общительный, жизнерадостный, легко адаптируешься к изменениям. Склонен к поверхностному восприятию, но легко загораешься", "Ты холерик: энергичный, импульсивный, склонен к резким реакциям. Лидер, но можешь быть несдержан.")))`

Итоговая схема выглядит следующим образом:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 14.56.49.png" alt=""><figcaption></figcaption></figure>

**Важно! Блоки с названием "Начисляем баллы" с пустым сообщением #{none} — в них мы считаем только количество баллов.**

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-08-06 в 14.58.17.png" alt=""><figcaption></figcaption></figure>

Итого: как работает бот:

<figure><img src="../../.gitbook/assets/Запись-экрана-2025-08-06-в-14.39.28-_online-video-cutter.com_.gif" alt="" width="375"><figcaption></figcaption></figure>

{% hint style="success" %}
Готово!&#x20;

Теперь вы умеете создавать опросы для мессенджеров в боте!
{% endhint %}
