# AI-ассистент с Salebot-таблицами

С помощью функции, разработанной командой Salebot, чат-бот ИИ прекрасно понимает введенные в таблицу значения, а затем записывает их в системную переменную в настройках проекта.&#x20;

Например, это может понадобится для AI-ассистента, который будет консультировать ваших клиентов по имеющемуся ассортименту товаров в вашем интернет-магазине, а также для рекламы умным ботом ваших возможностей.&#x20;

Как именно использовать чтение google-таблицы ботом - решать только Вам, а мы в свою очередь покажем, как оформить таблицу и настроить бота на работу с ней.

## Подготовка таблицы

Для начала перейдите в раздел таблицы:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-03-01 в 16.49.59.png" alt=""><figcaption></figcaption></figure>

Далее вы увидите кнопку "Добавить таблицу", кликнув по которой откроется модальное окошко, в котором нужно ввести название таблицы:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-03-01 в 17.09.39.png" alt="" width="375"><figcaption></figcaption></figure>

Пропишите название для таблицы и кликните на кнопку "Готово". Тогда новая таблица будет создана в проекте и появится в разделе "Таблицы":

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.06.59.png" alt=""><figcaption></figcaption></figure>

### Настройки таблицы

После того как вы создали таблицу, необходимо добавить строки и колонки. Для этого на плашке нужной таблицы найдите кнопку "Перейти" и кликните по ней.

Вы увидите следующие настройки:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-03-01 в 17.15.09.png" alt="" width="563"><figcaption></figcaption></figure>

Чтобы добавить столбец с названием, нажмите "Плюс":

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-03-01 в 17.42.41.png" alt="" width="563"><figcaption></figcaption></figure>

при клике на кнопку появится модальное окно, в котором нужно прописать название для добавляемого столбца:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.10.00.png" alt="" width="375"><figcaption></figcaption></figure>

После того как вы прописали название столбца, кликните по кнопке "Готово", тогда новый столбец добавится в таблицу. Добавьте необходимое количество столбцов, а затем строк:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.11.37.png" alt=""><figcaption></figcaption></figure>

Теперь наша таблица выглядит следующим образом:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.09.12.png" alt=""><figcaption></figcaption></figure>

Скопируйте (запомните) ID таблицы: для этого нажмите на адресную строку:&#x20;

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.13.41.png" alt=""><figcaption></figcaption></figure>

Теперь перейдем к настройкам блоков в конструкторе.

## Работа в конструкторе воронок

### Функция get\_records\_from\_table()

Для того чтобы использовать функцию get\_records\_from\_table(), понадобится один блок в конструкторе воронок.&#x20;

Перейдите в соответствующую вкладку в Salebot и создайте блок с условием (стартовое условие или не состояние с условием):

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.28.09.png" alt=""><figcaption></figcaption></figure>

Назначьте переменную (она понадобится для знаний AI-ассистента): в примере это переменная 'online\_shope'.&#x20;

Пример кода из калькулятора:

<mark style="color:green;">`project.`</mark><mark style="color:red;">`online_shop`</mark>` ``=`` `<mark style="color:orange;">`get_records_from_table`</mark>`(`<mark style="color:yellow;">`5`</mark>`)`

1. <mark style="color:green;">`project. - конструкция для записи переменной в настройки проекта;`</mark>
2. <mark style="color:red;">`online_shop - название переменной;`</mark>
3. <mark style="color:orange;">`get_records_from_table`</mark>`(`<mark style="color:yellow;">`5`</mark>`) - функция, где передан параметр в виде ID таблицы.`&#x20;

<details>

<summary>Подробнее о функции</summary>

get\_records\_from\_table(table\_id, start\_row, count, start\_col, end\_col) - получение записи из таблицы

| Параметр     | Описание                                                                                 | Примечание                                                                                                         |
| ------------ | ---------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| ! table\_id  | id таблицы (обязательный параметр)                                                       |                                                                                                                    |
| start\_row   | необязательный параметр, целое число. Указывает начало диапазона строк.                  | Передается номер строки, с которой включительно необходимо прочесть значения таблицы. Указывается без кавычек.     |
| count        | необязательный параметр, целое число. Указывает количество строк, которое нужно получить | По умолчанию - 1000, максимум - 5000. Указывается без кавычек.                                                     |
| start\_col   | необязательный параметр, строка. Указывает начало диапазона столбцов                     | Передается название колонки, с которой включительно необходимо прочесть значения таблицы. Указывается в кавычках   |
| end\_col     | необязательный параметр, строка. Указывает конец диапазона столбцов                      | Передается название колонки, до которой включительно необходимо прочесть значения таблицы. Указывается в кавычках. |

Если указать только начало диапазона строк/столбцов, то будут получены все данные от указанного значения без ограничения по концу диапазона. Аналогично можно не указывать начало диапазона, указав только конец.&#x20;

</details>

Пропишем в сообщении вместо #{none} нашу переменную через конструкцию #{}, чтобы наглядно увидеть, какие данные записались в переменную проекта.

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.32.05.png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Обращаем внимание!&#x20;

Переменная, вложенная в сообщении, необходима для проверки чтения ботом функции.&#x20;

При запуске блока в режиме тестирования бот покажет значения, которые будут вложены в переменную.
{% endhint %}

{% hint style="success" %}
Обращаем внимание!

После настроек вызова блока в режиме тестирования и сохранения переменной в настройках проекта, не удаляйте данный блок.&#x20;

Он может понадобится: например, если вы добавили еще какие-либо значения в таблицу, просто запустите блок в тестовом режиме. Тогда данные в переменной проекта обновятся.
{% endhint %}

{% hint style="info" %}
Название переменной может быть любое, удобное вам.
{% endhint %}

### Блок для передачи данных

Далее создадим блок "Состояние" для передачи данных в карточку клиента

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.53.34.png" alt=""><figcaption></figcaption></figure>

Можно также в данном блоке передать завершающее сообщение от бота, например, "Спасибо за заказ! Передаю данные менеджеру по связи!":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.09.31.png" alt=""><figcaption></figcaption></figure>

Далее скопируйте ID блока - он понадобится для настройки AI-ассистента в команде  "вызываю блок <mark style="color:red;">31241050</mark>" , где вместо <mark style="color:red;">ID блока</mark> из примера вам необходимо вставить ID своего блока.

{% hint style="success" %}
Важно!

После тестирования замените "вызываю блок <mark style="color:red;">31241050</mark>" на команду "start\_block\_from\_ai <mark style="color:red;">31241050</mark>".

Команда "вызываю блок <mark style="color:red;">31241050</mark>" является отладочной и понадобится для понимания того, какие данные записывает бот (см. параграф "[Тестирование](ai-assistent-s-salebot-tablicami.md#testirovanie-bota)").

Для запуска бота для клиентов прописывайте команду "start\_block\_from\_ai <mark style="color:red;">31241050</mark>".
{% endhint %}

### Чтение таблицы

Теперь перейдите в тестирование бота и запустите блок с условием:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.37.49.png" alt="" width="375"><figcaption></figcaption></figure>

Таким образом, блок отработался верно: вы видите значения, которые лежат в переменной в настройках проекта.&#x20;

В этом можно убедиться, перейдя в соответствующий раздел:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.39.04.png" alt=""><figcaption></figcaption></figure>

Во вкладке "Переменные" в настройках проекта вы увидите свою переменную с вложенными в нее значениями из таблицы. Таким образом, теперь внутри вашего проекта существует переменная с товарами, стоимостью и всем тем, что вы указали в таблице.

## Работа в AI-ассистенте

Переходим в раздел "AI-ассистент" и приступаем к настройке чат-бота с ИИ

Роль ассистента: продажник

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.12.22.png" alt="" width="341"><figcaption></figcaption></figure>

Также установим дополнительные настройки:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.42.01.png" alt=""><figcaption></figcaption></figure>

### Настройки AI-ассистента

В настройках бота прописываем следующие данные:&#x20;

1. Должность и инструкции для бота.

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.44.13.png" alt=""><figcaption></figcaption></figure>

2. Команда для вызова блока и передачи переменных в систему прописывается следующим образом:

<Если клиент написал "Заказ составлен верно" или "Верно", то напиши "start\_block\_from\_ai N">, где вместо N прописывается ID блока с завершающим сообщением: блок Состояние передает данные в карточку клиента:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.44.50.png" alt=""><figcaption></figcaption></figure>

### Знания бота

В поле "Знания бота" передайте переменную, которую ранее закешировали блоком с условием:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.32.05.png" alt=""><figcaption></figcaption></figure>

Знания бота:&#x20;

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.45.47.png" alt=""><figcaption></figcaption></figure>

Так бот будет брать информацию из переменной, лежащей в настройках проекта, и консультировать ваших клиентов по поводу имеющегося ассортимента.&#x20;

### Формат данных

В формате передаваемых данных вы прописываете собственно сами собираемые данные (например, товар), далее прописывается фразу с "ключом" и присваиваете значение ключу:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.46.33.png" alt=""><figcaption></figcaption></figure>

Так переменные при вызове блока будут передаваться в карточку клиента: далее вы сможете работать с переменными, например, в конструкторе:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.49.15.png" alt="" width="563"><figcaption></figcaption></figure>

Поскольку в формате передаваемых данных мы объявили переменную payment\_sum, при подключенных платежных сервисах вы сможете выдавать ссылку на оплату прямо в боте:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.51.27.png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
При объявлении переменной payment\_sum сумма ссылка на оплату генерируется автоматически!&#x20;

Не подходит для ю/л и ИП с НДС.&#x20;
{% endhint %}

{% hint style="danger" %}
Настоятельно рекомендуем выдавать ссылку на оплату после проверки суммы оплаты менеджером во избежании неточностей!
{% endhint %}

На этом настройка AI-ассистента завершена.&#x20;

Остальные параметры можно выставить по-своему усмотрению:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.15.51.png" alt="" width="563"><figcaption></figcaption></figure>

## Тестирование бота

Если у вас уже работают боты, то укажите в условии запуска АИ-ассистента запуск только в окне тестирования.

Шаг 1. Кликните по конструктору условий

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.17.55.png" alt="" width="563"><figcaption></figcaption></figure>

Шаг 2. Выберите вкладку с тестовым окном и кликните "Добавить":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.18.22.png" alt="" width="563"><figcaption></figcaption></figure>

Теперь в условии для запуска вы видите следующее значение:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.20.08.png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Так бот будет запускаться только в тестовом окне и нигде больше.

После отладки работы бота, уберите данное условие.&#x20;
{% endhint %}

В примере мы протестируем прямо в мессенджере:

<figure><img src="../../.gitbook/assets/Запись-экрана-2025-07-15-в-17.57.16-_online-video-cutter.com_.gif" alt="" width="563"><figcaption></figcaption></figure>

<details>

<summary>Дополнительно</summary>

В схеме мы создали блоки для формирования ссылки на оплату и реакции на колбек об успешной оплате.&#x20;

АИ-ассистент вызывает блок для формирования ссылки на оплату, затем отправляется блок с кнопкой:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.12.36.png" alt=""><figcaption></figcaption></figure>

Далее после успешной оплаты приходит колбек в диалоге с клиентом (колбек пользователь не видит):

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.17.54.png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="info" %}
Обратите внимание, что на примере выше, видно, где отработал AI, а где бот из конструктора.&#x20;

1. Серые сообщения — сообщения AI-ассистента;
2. Синие — сообщения из блоков в конструкторе.
{% endhint %}

На данный колбек настроена реакция в блоке с условием:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.19.18.png" alt=""><figcaption></figcaption></figure>



</details>

{% hint style="danger" %}
Не направляйте ссылку на оплату без тестирования платежей!

Подробнее о настройках каждой платежной системы рассказали в разделе "[Эквайринг](../../integracii/platezhnye-sistemy/)".
{% endhint %}

Данное сообщение отправляется в режиме тестирования из-за команды "вызываю блок <mark style="color:red;">31241050</mark>"

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.04.28.png" alt="" width="563"><figcaption></figcaption></figure>

После тестирования и отладки работы бота, прописывайте команду в [настройках бота](ai-assistent-s-salebot-tablicami.md#nastroiki-ai-assistenta) "start\_block\_from\_ai <mark style="color:red;">31241050</mark>".

{% hint style="success" %}
Таким образом вы можете создать интернет-магазин любого вида, использовать любые необходимые значения внутри таблицы.&#x20;

Основное ограничение - только Ваша фантазия!
{% endhint %}
