# AI-ассистент с google-таблицами

С помощью функции, разработанной командой Salebot, чат-бот ИИ прекрасно понимает введенные в таблицу значения, а затем записывает их в системную переменную в настройках проекта.&#x20;

Например, это может понадобится для AI-ассистента, который будет консультировать ваших клиентов по имеющемуся ассортименту товаров в вашем интернет-магазине, а также для рекламы умным ботом ваших возможностей.&#x20;

Как именно использовать чтение google-таблицы ботом - решать только Вам, а мы в свою очередь покажем, как оформить таблицу и настроить бота на работу с ней.

## Подготовка google-таблицы

### Создание и заполнение

Откройте редактор таблицы:&#x20;

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 09.43.37.png" alt="" width="563"><figcaption></figcaption></figure>

Вам необходимо заполнить строки с обозначениями категорий столбцов:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 09.48.12.png" alt="" width="563"><figcaption></figcaption></figure>

Поскольку ИИ может считывать данные, с помощью функции он запишет значения из таблицы в переменную в настройках проекта, поэтому советуем добавлять лаконичные и понятные наименования категорий столбцов для вашего удобства и понимания поведения бота.&#x20;

Далее укажите в столбцах необходимые наименования:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.24.22.png" alt="" width="563"><figcaption></figcaption></figure>

Разберемся с категорией столбца "Единица измерения":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.25.06.png" alt="" width="252"><figcaption></figcaption></figure>

В единицу измерения можно вложить:&#x20;

1. Количественный показатель в виде штук/единиц (одна единица товара, две единицы товара, одна штука и т.д.):

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.28.03.png" alt=""><figcaption></figcaption></figure>

2. Единицы измерения величин: литры, килограммы, граммы, метры:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.30.32.png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
Бот прекрасно поймет, что вы имели ввиду и будет пользоваться значениями, вложенными в слоты.&#x20;
{% endhint %}

Последним шагом в заполнении google-таблицы будет цена за единицу измерения:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.36.53.png" alt=""><figcaption></figcaption></figure>

На данном этапе google-таблица заполнена.&#x20;

### Настройки доступа

Для того чтобы бот с ИИ смог взять значения из таблицы, необходимо открыть настройки доступа:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.39.44.png" alt=""><figcaption></figcaption></figure>

Нажмите на настройки, после чего откроется следующее окно:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.43.03.png" alt="" width="375"><figcaption></figcaption></figure>

Здесь необходимо изменить настройку вместо "Доступ ограничен" на "Все, у кого есть ссылка":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.44.23.png" alt="" width="563"><figcaption></figcaption></figure>

### ID таблицы

Чтобы работать с функцией get\_info\_from\_table(!sheet\_id, number\_sheet, sheet\_json\_keys), нам понадобится ID таблицы, так как обязательным параметром функция принимает sheet\_id.&#x20;

Чтобы получить ID, достаточно кликнуть по адресной строке:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.49.44.png" alt=""><figcaption></figcaption></figure>

Вам откроется строка с адресом страницы:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.51.28.png" alt=""><figcaption></figcaption></figure>

Из которой нам понадобится набор символов и букв, как раз и являющийся ID таблицы:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 10.53.01.png" alt=""><figcaption></figcaption></figure>

На этом работа c таблицей и ее настройка завершена.&#x20;

## Работа в конструкторе воронок

### Использование функции get\_info\_from\_table()

Для того чтобы использовать функцию get\_info\_from\_table(), понадобится один блок в конструкторе воронок.&#x20;

Перейдите в соответствующую вкладку в Salebot и создайте блока с условием (стартовое условие или не состояние с условием):

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.25.18.png" alt=""><figcaption></figcaption></figure>

Пропишем в сообщении вместо #{none} уведомление для тестового режима после запуска данного блока и вложенную переменную через конструкцию #{}:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.00.04.png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Обращаем внимание!&#x20;

Переменная, вложенная в сообщении, необходима для проверки чтения ботом функции.&#x20;

При запуске блока в режиме тестирования бот покажет значения, которые будут вложены в переменную.
{% endhint %}

{% hint style="success" %}
Обращаем внимание!

После настроек вызова блока в режиме тестирования и сохранения переменной в настройках проекта, не удаляйте данный блок.&#x20;

Он может понадобится: например, если вы добавили еще какие-либо значения в таблицу, просто запустите блок в тестовом режиме. Тогда данные в переменной проекта обновятся.
{% endhint %}

{% hint style="info" %}
Название переменной может быть любое, удобное вам.
{% endhint %}

Далее нам понадобится функция get\_info\_from\_table(sheet\_id, number\_sheet, sheet\_json\_keys) - функция предназначена для чтения данных из таблицы.

<table><thead><tr><th width="248">параметры</th><th>описание </th></tr></thead><tbody><tr><td><mark style="color:red;"><strong>!</strong></mark> sheet_id</td><td>id google-таблицы</td></tr><tr><td>number_sheet</td><td>Номер листа в таблице; по умолчанию = 1</td></tr><tr><td>sheet_json_keys </td><td>Необязательный параметр, ключ доступа к данным таблицы</td></tr></tbody></table>

Откройте калькулятор и пропишите ID таблицы, вложив ее в переменную (например, sheet):

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.03.57.png" alt="" width="537"><figcaption></figcaption></figure>

Далее назначьте переменную, указанную в сообщении блока, и присвойте ей значение в виде функции get\_info\_from\_table() с обязательным параметром sheet\_id (вместо которого вставьте переменную sheet, где лежит ID таблицы):

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.33.34.png" alt="" width="563"><figcaption></figcaption></figure>

<mark style="color:red;">**Важно!**</mark> Перед переменной product\_pay\_info в калькуляторе пропишите project - это необходимо для того, чтобы ПЕРЕМЕННАЯ и ЗНАЧЕНИЯ из таблицы были внесены в настройки проекта (закешировались):

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.36.10.png" alt=""><figcaption></figcaption></figure>

Теперь пропишите любое слово/цифры в условие блока:&#x20;

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 18.27.58.png" alt=""><figcaption></figcaption></figure>

### Блок для передачи данных

Далее создайте второй блок Состояние:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 11.53.34.png" alt=""><figcaption></figcaption></figure>

Данный блок Состояние понадобится для передачи переменных в карточку клиента.&#x20;

Можно также в данном блоке передать завершающее сообщение от бота, например, "Спасибо за заказ! Передаю данные менеджеру по связи!":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.09.31.png" alt=""><figcaption></figcaption></figure>

Далее скопируйте ID блока - он понадобится для настройки AI-ассистента в команде "start\_block\_from\_ai 31241050", где вместо ID из примера вам необходимо вставить ID своего блока.

### Чтение таблицы

Теперь перейдите в тестирование бота и запустите блок с условием:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.37.49.png" alt="" width="375"><figcaption></figcaption></figure>

Таким образом, блок отработался верно: вы видите значения, которые лежат в переменной в настройках проекта.&#x20;

В этом можно убедиться, перейдя в соответствующий раздел:

<figure><img src="../../.gitbook/assets/Снимок экрана 2025-07-15 в 17.39.04.png" alt=""><figcaption></figcaption></figure>

Во вкладке "Переменные" в настройках проекта вы увидите свою переменную с вложенными в нее значениями из таблицы. Таким образом, теперь внутри вашего проекта существует переменная с товарами, стоимостью и всем тем, что вы указали в таблице.

## Работа в AI-ассистенте

Переходим в раздел "AI-ассистент" и приступаем к настройке искусственного интеллекта.&#x20;

Роль ассистента: продажник

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.12.22.png" alt="" width="512"><figcaption></figcaption></figure>

Также установим опции "Кнопки" и "Пошаговый ввод данных":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.24.20.png" alt=""><figcaption></figcaption></figure>

Кнопки нам понадобятся для визуально оформленных ответов бота, а также удобства клиента (тогда вашему пользователю не нужно вводить вручную слова в диалоге); пошаговый ввод данных - для опроса ботом по поводу формируемого заказа.

### Настройки AI-ассистента

В настройках бота прописываем следующие данные:&#x20;

1. Должность и инструкции для бота.

Пример:

<_Ты продавец магазина "Все мелочи._ \
_Твоя задача спросить у клиента, какой товар он хочет выбрать, сколько единиц товара, а далее высчитать итоговую стоимость  товара, равную единице товара, умноженное на стоимость._

_После того, как ты опросил клиента по поводу его покупки, продублируй ему заказ и спроси "Верно ли составлен заказ?"_>.&#x20;

**Обращаем внимание** на строку "Высчитать итоговую стоимость товара, равную единице товара, умноженную на стоимость" - данная строка выведет итоговый результат стоимости всех выбранных категорий клиентом:

Пример:

&#x20;Клиент выбрал три кг одного товара. Бот, в свою очередь, рассчитывает итоговую стоимость:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.17.49.png" alt="" width="563"><figcaption></figcaption></figure>

2. Команда для вызова блока и передачи переменных в систему прописывается следующим образом:

<Если клиент написал "Заказ составлен верно" или "Верно", то напиши "start\_block\_from\_ai N">, где вместо N прописывается ID блока с завершающим сообщением: блок Состояние передает данные в карточку клиента:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.09.31 (1).png" alt="" width="563"><figcaption></figcaption></figure>

Команды в настройках AI-ассистента выглядят следующим образом:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.27.32.png" alt=""><figcaption></figcaption></figure>

### Знания бота

В поле "Знания бота" передайте переменную, которую ранее закешировали блоком Первостепенной проверки условия:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.30.11.png" alt=""><figcaption></figcaption></figure>

Знания бота:&#x20;

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.31.28.png" alt=""><figcaption></figcaption></figure>

Так бот будет брать информацию из переменной, лежащей в настройках проекта, и консультировать ваших клиентов по поводу имеющегося ассортимента.&#x20;

### Формат данных

В формате передаваемых данных вы прописываете собственно сами собираемые данные (например, товар), далее прописывается фразу с "ключом" и присваиваете значение ключу:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.37.10.png" alt=""><figcaption></figcaption></figure>

#### Объяснение

Строка 1: "Формат передаваемых данных: товар с ключом product, единица измерения с ключом thing, цена с ключом count, общая стоимость всех выбранных товаров с ключом result" - дает боту понять, какие данные и с каким значением необходимо передать в систему.&#x20;

Данные переменные будут отображаться в карточке клиента:

<figure><img src="../../.gitbook/assets/ккк.jpg" alt="" width="563"><figcaption></figcaption></figure>

2. Если вам необходимо, чтобы каждый выбранный клиентом товар отображался отдельно, добавьте второй строкой:

"Если клиент выбрал несколько товаров, то запиши первый товар с ключом product1, второй товар с ключом product2, третий товар с ключом product3 и так далее".

На этом настройка AI-ассистента завершена.&#x20;

Остальные параметры можно выставить по-своему усмотрению:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.15.51.png" alt="" width="563"><figcaption></figcaption></figure>

## Тестирование бота

Добавьте через конструктор условий работу бота в тестовом окне:

Шаг 1. Кликните по конструктору условий

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.17.55.png" alt=""><figcaption></figcaption></figure>

Шаг 2. Выберите вкладку с тестовым окном и кликните "Добавить":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.18.22.png" alt="" width="563"><figcaption></figcaption></figure>

Теперь в условии для запуска вы видите следующее значение:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.20.08.png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Так бот будет запускаться только в тестовом окне и нигде больше.

После отладки работы бота, уберите данное условие.&#x20;
{% endhint %}

Теперь протестируем бота:

1. Зададим контрольный вопрос боту об ассортименте товаров:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.22.54.png" alt="" width="375"><figcaption></figcaption></figure>

Бот показал ассортимент товаров, которые были введены в google-таблице, захватывая значения из переменной, содержащейся в настройках проекта.

2. Далее выберем товар и поговорим с умным ботом:

<div><figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.27.22.png" alt="" width="375"><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.28.39.png" alt="" width="375"><figcaption></figcaption></figure></div>

3. Выберем другой товар:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.29.52.png" alt="" width="375"><figcaption></figcaption></figure>

Бот также отображает корректно, показывая клиенту уже категории товаров для последующего выбора.&#x20;

4. Клиент выбрал несколько товаров и выбрал их количество:

<div><figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.31.49.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.32.03.png" alt=""><figcaption></figcaption></figure></div>

Бот высчитал стоимость выбранных единиц товара и рассчитал итоговую стоимость.&#x20;

5. Отправляем данные в систему:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.36.09.png" alt="" width="375"><figcaption></figcaption></figure>

Итог: после того, как бот продублирован заказ и клиент ответил, что заказ составлен верно, чат-бот, опираясь на настройки, вызвал блок "Состояние диалога":

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 12.09.31.png" alt=""><figcaption></figcaption></figure>

После чего данные, сформированные ботом в диалоге с клиентом, направились в карточку клиента:

<figure><img src="../../.gitbook/assets/Снимок экрана 2024-06-20 в 13.40.54.png" alt="" width="563"><figcaption></figcaption></figure>

Бот отработал все корректно.

{% hint style="success" %}
Таким образом вы можете создать интернет-магазин любого вида, использовать любые необходимые значения внутри таблицы.&#x20;

Основное ограничение - только Ваша фантазия!
{% endhint %}

## Видеогид

{% embed url="https://youtu.be/LTEmRgbRp8M" %}
