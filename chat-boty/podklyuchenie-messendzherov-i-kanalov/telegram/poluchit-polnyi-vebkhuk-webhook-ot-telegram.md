# Получить полный вебхук (webhook) от Telegram

{% hint style="success" %}
_**Что такое вебхук?**_&#x20;

Это уведомление о произошедшем событии. Такое уведомление содержит значения измененных переменных.
{% endhint %}

## Как получить вебхук?

Для получения полного вебхука от Телеграм достаточно присвоить <mark style="color:red;">**любое значение переменной**</mark>  **save\_webhook:**

**1) или текстовое значение:**

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-07-16 в 13.45.59.png" alt=""><figcaption></figcaption></figure>

2\) или числовое значение:

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-07-16 в 13.46.38.png" alt=""><figcaption></figcaption></figure>

Переменная save\_webhook может быть как константой проекта, так и переменной в калькуляторе:

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.11.16.png" alt=""><figcaption></figcaption></figure>

При этом ответ клиента на сообщение бота, в котором есть такая переменная, будет записываться в переменную **tg\_request**, которую вы найдете в карточке клиента среди переменных сделки:

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.13.28.png" alt="" width="563"><figcaption><p>Клиент ответил на сообщение бота из блока, в котором <br>присвоена переменная save_webhook</p></figcaption></figure>

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.17.19.png" alt=""><figcaption><p><strong>tg_request и</strong> save_webhook в переменных клиента</p></figcaption></figure>

## Как получить ссылку на медиа с помощью переменной?

При помощи tg\_request можно получить ссылку на видео / изображение / анимацию.&#x20;

Для этого реализуем простую схему на получение файла:

1. Присвойте переменной **save\_webhook** любое значение удобным для вас способом, показанным выше, - либо константа проекта, либо переменная в калькуляторе. А затем создайте блок с условием.&#x20;

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-07-16 в 13.48.03.png" alt=""><figcaption></figcaption></figure>

1. Из первого блока создайте следующий, в котором выведем результат

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.28.24.png" alt=""><figcaption></figcaption></figure>

Теперь перейдем к практическим действиям:

* перейдите в подключенный бот Telegram
* напишите свое ключевое слово&#x20;
* отправьте файл, ссылку которого вы желаете получить:

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.32.24.png" alt="" width="563"><figcaption></figcaption></figure>

Нас интересует последний file\_id в полученном ответе Telegram:

<figure><img src="../../../.gitbook/assets/Снимок экрана 2025-05-06 в 10.33.09.png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="success" %}
Не забывайте, что полученная ссылка действует только в рамках того бота, в который вы отправляли файл
{% endhint %}
