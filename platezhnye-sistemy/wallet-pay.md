---
description: >-
  В данной статье объясним, как подключить и начать работу с платежной системой
  Wallet pay от Telegram.
---

# Wallet pay

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.07.39.png" alt="" width="319"><figcaption></figcaption></figure>

## Подключение платежной системы

### Подключение на стороне Telegram

**Шаг 1.** _Войдите в партнёрскую учетную запись_

{% hint style="info" %}
Для этого [перейдите по ссылке ](https://pay.wallet.tg/)
{% endhint %}

В открывшейся странице нажмите «Войти через Telegram», после чего введите свой номер телефона во всплывающем окне «Появляется oauth.telegram.org» и нажмите «Применить».

Необходимо подключить платежную систему и через веб-браузер, и через приложение:

* Вам придет сообщение в Telegram с запросом на авторизацию - нажмите «_**Применить**_».
* Также необходимо нажать «Применить» во всплывающем окне «_**oauth.telegram.org**_» **в веб-браузере**.

{% hint style="success" %}
Мы рекомендуем использовать учетную запись, к которой имеет доступ лицо, занимающееся финансами. Для юридических лиц – уполномоченный представитель.
{% endhint %}

**Шаг 2.** _Пройдите небольшой опрос_

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.09.34.png" alt=""><figcaption><p>Рис. 1. Заполнение информации о мерчанте</p></figcaption></figure>

Если вы входите в систему впервые или требуется какая-то дополнительная информация, Wallet Pay предлагает вам ответить на несколько вопросов для получения более подробных данных. Есть два шага:

#### 1. Анкета

#### 2. Проверки KYB (Знай свой бизнес) или KYC (Знай своего клиента)

После завершения ваша заявка будет рассмотрена в ближайшее время, и вы будете уведомлены о результатах. В случае успеха вы увидите комиссию, взимаемую сервисом, и получите доступ к своей учетной записи, где сможете начать интеграцию.

{% hint style="warning" %}
Для юридических лиц форму может заполнить только доверенное лицо: директор или сотрудник по доверенности.
{% endhint %}

**Шаг 3.** _Создайте первый «Магазин»._

После успешного прохождения «Опроса» вам будет предложено создать свой первый магазин.

**Шаг 4.** _Создайте «ключ API»_

После названия первого магазина вам будет предложено его настроить:

* Сгенерируйте ключ API.
* Скопируйте свой ключ API и начните интеграцию с Salebot.

**Шаг 5**. _Создайте заказ и получите ссылку на оплату_

Если вы хотите поместить ссылку в кнопку используйте **Inline Button**.

Обратите внимание, что только указанный «customerTelegramUserId» может открыть страницу оплаты.

**Шаг 6.** _Выведите средства_

После того, как клиент подтвердит оплату, средства зачисляются на ваши активы и по умолчанию удерживаются в течение 48 часов. По истечении этого времени вы сможете вывести средства на баланс вашего Кошелька, который вы использовали для входа в сервис Wallet Pay.

**Шаг 7.** _Возврат средств_

На данный момент вывод средств доступен со своей учетной записи Wallet, которую вы используете для входа в Wallet Pay. Но в ближайшее время он будет доступен в вашем Мерчант-аккаунте.

### Как должна выглядеть кнопка оплаты

При интеграции вашего «Telegram Bot» с «Wallet Pay API» убедитесь, что кнопка оплаты соответствует следующим рекомендациям:

1. Названа одним из двух вариантов:

* :purse: Wallet Pay
* :purse: Pay via Wallet

2. Расположена над остальными кнопками (если они у вас есть).

> Примечание. :purse: — это смайлик (см. https://emojipedia.org/purse/).
>
> См. пример в \[[Demo Store Bot](https://t.me/PineAppleDemoWPStoreBot)].

## Подключение в Salebot

Войдите в проект и в разделе “_Платежные системы_” нажмите кнопку “**Подключить**” для Wallet Pay.

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.14.50.png" alt=""><figcaption><p>Рис. 2. Раздел "Эквайринг" для подключения сервиса к Сейлботу</p></figcaption></figure>

В открывшемся окне введите API ключ сгенерированный для вашего магазина Wallet Pay.

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.15.56.png" alt=""><figcaption><p>Рис. 3. Форма с полем для ввода API-ключа</p></figcaption></figure>

* [x] Готово! Теперь клиенты могут оплачивать покупки в вашем магазине в криптовалюте (USDT, Toncoin and Bitcoin) с помощью сервиса Wallet Pay.

### Как сгенерировать ссылку для оплаты

Создайте блок конструктора воронок и в калькуляторе вызовите функцию “**wallet\_pay\_generate\_payment\_url**”, передав в неё необходимые параметры:

| Параметр             | Описание параметра                                                                                 |
| -------------------- | -------------------------------------------------------------------------------------------------- |
| **amount**           | сумма платежа в криптовалюте или другой фиатной валюте доступной для конвертации в “TON”.          |
| **сurrency\_code**   | валюта платежа, по умолчанию - “RUB”. Список доступных валют: "TON" "BTC" "USDT" "EUR" "USD" "RUB" |
| **description**      | краткое описание заказа от 5 до 100 символов.                                                      |
| **timeout\_seconds** | срок действия ссылки в секундах, по умолчанию - 3600 секунд.                                       |

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.21.07.png" alt=""><figcaption><p>Рис. 4. Пример передачи параметров</p></figcaption></figure>

При срабатывании блока в чате с ботом клиент получит ссылку для оплаты, а также будет создана переменная клиента **wallet\_pay\_payment\_completed** со значением <mark style="color:red;">**False**</mark>.

{% hint style="warning" %}
Данную ссылку возможно открыть только в чате с ботом подключенным к платёжному аккаунту Wallet Pay.
{% endhint %}

### Проверка оплаты

После успешной оплаты переменная клиента **wallet\_pay\_payment\_completed** примет значение <mark style="color:green;">**True**</mark>, а продавцу придёт callback в виде **4690FE98\_success**, которое состоит из:

* “4690FE98” - это первые 8 символов ключа Wallet Pay API.
* слова об успешно

<mark style="color:red;">**!**</mark> При ошибке оплаты придёт **callback** c суффиксом “<mark style="color:red;">**\_fail**</mark>”.

Адрес для уведомлений (коллбеков): [https://chatter.salebot.pro/wallet\_pay/payment\_callback](https://chatter.salebot.pro/wallet_pay/payment_callback) - вставляется в настройку платежной системы

Колбек можно вложить в условие блока, чтобы направить клиенту сообщение об успешной оплате (или ошибке платежа):

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.27.24.png" alt=""><figcaption><p>Рис. 5. Пример реакции на колбек в блоке "Стартовое условие"</p></figcaption></figure>

<figure><img src="../.gitbook/assets/Снимок экрана 2025-07-01 в 15.27.09.png" alt=""><figcaption><p>Рис. 6. Пример реакции на колбек в блоке "Не состояние с условием"</p></figcaption></figure>

{% hint style="info" %}
Если вы не хотите выбивать клиента из основной схемы чат-бота, воспользуйтесь блоком "Не состояние с условием" — в этот блок нельзя перейти, поэтому клиента после оплаты не выбьет из основной воронки и при этом он получит уведомление об успешной оплате.



А если вам нужно продолжить воронку с реакции на успешную оплату, то используйте блок "Стартовое условие", тогда клиент из блока оплаты перейдет в блок "Стартовое условие", с которого вы можете продолжить воронку.
{% endhint %}

{% hint style="info" %}
Подробнее о [блоках с условием рассказали](/broken/pages/VktePfPMzzJlbjBSqE93) в одноименной статье.
{% endhint %}

### Полезные ссылки

\[[Wallet Pay Business Support](https://t.me/WalletPay_supportbot)]

\[[Demo Store Bot](https://t.me/PineAppleDemoWPStoreBot)]

\[[Merchant Community](https://t.me/+6TReWBEyZxI5Njli)]
