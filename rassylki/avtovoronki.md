# Автоворонки

{% hint style="warning" %}
Важно!&#x20;

Максимально количество запланированных сообщений на одного клиента — 32 сообщения.&#x20;
{% endhint %}

## Цепочки сообщений

Цепочки сообщений — популярный инструмент в мессенджер-маркетинге. Это запланированная серия сообщений, отправляемых с определенным интервалом. Они подогревают интерес пользователей. Такой подход также эффективен для напоминаний о мероприятиях. Например, можно отправлять сообщения за неделю, за день и так далее до назначенного времени.

### Соединения с таймером

Соединения с таймером - это соединения, переход по которым будет произведен через период времени, указанный в редакторе. Стрелка отображается пунктирными линиям.<br>

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcI1HwTD0PX_07ZHy2j7NRkV_529HzDHkntjQ6G7OuMMXIZOo7M4Mv65P979x_0FZOS0oTBfLMZa19xy00K3jIAFx19vlkVmIg32j8LltzVzvWcjl5P60XgWLdcDIzMohLzm9x4Sw?key=_VJcbaDlafJuggKO1X25oIlq" alt=""><figcaption><p>Рисунок 1. Стрелка с таймером</p></figcaption></figure>

Для указания таймера вы можете заполнить значением первое поле настроек стрелки "Задержка перед ответом". Укажите число и выберите единицу измерения, которая будет применена к числу, это могут быть секунды, минуты, дни, часы и даже месяцы. Бот отправит сообщение через указанное вами время в поле задержки.&#x20;

В данном поле работают переменные, например, вы можете спросить "Через сколько минут Вам написать?" и сохранить это значение в переменную и указать в поле "Задержка перед ответом".&#x20;

### Пример

Шаг 1. Создаем блок, в котором спрашиваем, когда нужно перезвонить и установим кнопки для выбора клиенту:

<figure><img src="../.gitbook/assets/Снимок экрана 2025-04-28 в 18.28.27.png" alt="" width="563"><figcaption></figcaption></figure>

Шаг 2. В настройках стрелки:

а) Активируем чекбокс "Пользователь вводит данные";\
б) Прописываем переменную, в которую будет записано значение, выбранное клиентом;\
в) Указываем переменную в поле "Задержка перед ответом":

<figure><img src="../.gitbook/assets/Снимок экрана 2025-04-28 в 18.28.40.png" alt="" width="563"><figcaption></figcaption></figure>

Теперь бот отработается только в зависимости от выбранного клиентом времени.

{% hint style="warning" %}
Важно!&#x20;

Если из блока ведет такое соединение, переход будет осуществлен автоматически вне зависимости от ответа пользователя.
{% endhint %}

#### Случайная задержка

Вы можете указать случайную задержку, указав в поле вызов функции random(x, y), где x - минимальный размер задержки и y - максимальный размер. Пример использования:

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfUQP9sq9JjNLPFAr9_wrXhv6i6a935I90h7irf9quIyM4Q2YsBnJRPiebAvEUpNPRVbPR00owiE7xfJKpJGb7gyY4OqCM4E3HhPtcSCRxkUa8O9haVN9fr_LRbVCap2kPxERt3?key=_VJcbaDlafJuggKO1X25oIlq" alt=""><figcaption><p>Рисунок 2. Случайная задержка</p></figcaption></figure>

#### Отменить при переходе в другой блок. Стрелка-напоминание о необходимости ответить.

Активация этого ползунка отменит переход в этот блок, если клиент перешел в другой блок. Это удобно, когда вам надо организовать напоминание, если клиент долго не отвечает на сообщение из предыдущего блока. Или когда в зависимости от значения некой переменной пользователя, надо вести по одной или другой ветке сообщений, как в примере на Рисунке 3:

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdXL2G6y_uRBBv9q_zfcWgZV_KzbdGZTAXjvau4JxXO-kpl_AoauGT5qCNbfQzGs9VyE5aHUe0yfTLqebEOhEQdiOhJO85hxspIWElN5r-YGTF7zF9KjpqAdlGMb9jaDOx9P5I8CQ?key=_VJcbaDlafJuggKO1X25oIlq" alt=""><figcaption><p>Рисунок 3. Пример создания напоминания о необходимости ответа. Если клиент НЕ переходит в блок ниже, то получает сообщение из блок "Не состояние" через 5 секунд.</p></figcaption></figure>

#### Отменить сообщения с таймером

При включении этого ползунка отменяются все другие сообщения с таймером.

#### Не отменять

При включении "Не отменять" этот переход в блок не отменится вообще. Даже если в других стрелках воронки стоит условие "Отменить сообщения с таймером".

#### Время отправки с учетом задержки

Бот отправит сообщение в указанное время и прибавит задержку из поля "Задержка перед ответом". Если в день сообщения время прошло, а вы установили флаг "Отсылать, если дата прошла", оно будет запланировано на завтра. Для задания времени можно использовать переменную. Для этого введите нужную переменную в поле. Пример представлен на Рисунке 5.

#### Дата отправки с учетом задержки

Бот отправит сообщение в указанную дату, прибавив время и задержку. Удобно при проведении акций в определенный день. Если в день сообщения время прошло, и вы установили флаг "Отсылать, если дата прошла", оно будет запланировано на завтра.

Механизм работает следующим образом: сообщения с таймером, это сообщения, которые не требуют действия пользователя для перехода по ним. Вы указываете интервал или точное время, когда необходимо отправить сообщение. В итоге рассылка идет по этапам самостоятельно. Комбинируя с обычными соединениями можно реализовать любую цепочку сообщений.

Для задания времени можно использовать переменную. Для этого введите нужную переменную в поле. Пример представлен на Рисунке 5.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfljvYYp7ujVW8-Ue0CXmmleJ9uXc4VLMQzL3IymM69dKmFZ4mDFB1TxJGStE_rH6DqYDoAewgzCClPNdzi9ieLTMCCF3PnAmp9JZEk0xwmLjFHfnWyRA0FvqTOgdTIyjb3xRJP?key=_VJcbaDlafJuggKO1X25oIlq" alt="" width="563"><figcaption><p>Рисунок 4. Пример заданной даты в формате числа и даты</p></figcaption></figure>

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfr2fghm128bC_urzAdjR-uTJS5NMl7BX2sZPiA4AmvH4P--5hoCrPY-eOEDdXiEpEKY4MWIsgD9713HAE25rCOASGJGMSoCgGs72GLiYbVCrXJge2vFmEkGCNihtMtShJE-Qh0Tw?key=_VJcbaDlafJuggKO1X25oIlq" alt="" width="563"><figcaption><p>Рисунок 5. Вариант указания даты и времени отправки в переменных</p></figcaption></figure>
